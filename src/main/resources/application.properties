spring.application.name=knowi-search

# Server configuration
server.port=8080

# Perplexity API configuration
# Set your API key via environment variable PERPLEXITY_API_KEY
perplexity.api.key=${PERPLEXITY_API_KEY}
perplexity.api.url=https://api.perplexity.ai/chat/completions
perplexity.model=sonar

# Knowi Docs Crawler configuration
knowi.docs.base-url=https://www.knowi.com/docs/
knowi.docs.max-pages=100
knowi.docs.index-dir=./data/lucene-index

# Chunk configuration for document splitting
knowi.docs.chunk-size=1000
knowi.docs.chunk-overlap=150

# Redis configuration (for distributed caching)
# Set REDIS_HOST environment variable or use localhost for development
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.enabled=true
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=2

# Cache configuration
cache.local.max-size=500
cache.local.ttl-minutes=30
cache.redis.ttl-minutes=60
cache.redis.enabled=${REDIS_ENABLED:true}
# Similarity threshold for fuzzy query matching (0.0 to 1.0)
# Lower = more lenient matching, Higher = stricter matching
cache.similarity-threshold=0.70

# Rate Limiting configuration
rate-limit.enabled=true
# Use Redis for distributed rate limiting (recommended for load-balanced production)
# Set REDIS_RATE_LIMIT=true to enable
rate-limit.use-redis=${REDIS_RATE_LIMIT:true}
# Per-IP limits
rate-limit.requests-per-minute=30
rate-limit.chat-requests-per-minute=20
rate-limit.ingest-requests-per-hour=5
# Global system limit (across all IPs)
rate-limit.global-requests-per-minute=1000

